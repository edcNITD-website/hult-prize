{% extends 'base.html' %}
{% load static %} 
{% block title %}Hult Prize - Create Team{% endblock title %}
{% block css %}
<style>
  #preloader{
  background: white url("{%static 'assets/spinner-gif.gif' %}") no-repeat center center;
  background-size: 10%;
  z-index: 100;
  height: 100vh;
  width: 100%;
  position: fixed;
}
.burger {
  position: absolute;
  right: 15px;
}
input[readonly=""] {
  cursor: not-allowed;
}

.navbar-buffer {
  display: block;
  width: 100%;
  height: 100px;
}
</style>

<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
  crossorigin="anonymous"
/>
<link rel="stylesheet" href="{% static 'css/create-team.css' %}" />
{% endblock css %}

{% block body %}
{% for message in messages %}
<div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
  <strong>Message : </strong> {{ message }}
  <button
    type="button"
    class="btn-close"
    data-bs-dismiss="alert"
    aria-label="Close"
  >
  </button>
</div>
{% endfor %}

<!-- fix this later juniors -->
<div class="navbar-buffer">.</div>

<div class="join-team-box container">
  <a href="/join-team">View all Teams</a>
  <a href="/my-team">My Team</a>
</div>


<!-- preloader -->
<div id="preloader"></div>

<form action="/create-team" method="POST">
  {% csrf_token %}
  <!-- team name -->
  <div class="container my-4">
    <div class="row">
      <div class="col">
        <div class="mb-3">
          <label for="team_name" class="form-label">Team Name</label>
          <input
            type="text"
            class="custom-input"
            id="team_name"
            name="team_name"
            value="{{ team.team_name }}"
          />
        </div>
      </div>
    </div>
  </div>

  <!-- team leader -->
  <div class="container bg-white my-4 border">
    <span class="customBadge">Team Leader</span>
    <div class="row">
      <div class="col">
        <div class="mb-3">
          <label for="fname-0" class="form-title">First Name</label>
          <input
            type="text"
            class="custom-input"
            id="fname-0"
            name="fname-0"
            value="{{ user.first_name }}"
            readonly
          />
        </div>
      </div>
      <div class="col">
        <div class="mb-3">
          <label for="lname-0" class="form-title">Last Name</label>
          <input
            type="text"
            class="custom-input"
            id="lname-0"
            name="lanme-0"
            value="{{ user.last_name }}"
            readonly
          />
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <div class="mb-3">
          <label for="email-0" class="form-title">Email</label>
          <input
            type="email"
            class="custom-input"
            id="email-0"
            name="email-0"
            value="{{ user.email }}"
            readonly
          />
        </div>
      </div>
      <div class="col">
        <div class="mb-3">
          <label for="phone-0" class="form-title">Phone No.</label>
          <input
            type="text"
            class="custom-input"
            id="phone-0"
            name="phone-0"
            value="{{ team.leader_phone_no }}"
            readonly
          />
        </div>
      </div>
    </div>
  </div>

  {% if team_members.count == 0 %}
  <div class="container bg-white my-4 border">
    <span class="customBadge">Team Member1</span>
    <div class="row">
      <div class="col">
        <div class="mb-3">
          <label for="fname-1" class="form-title">First Name</label>
          <input type="text" class="custom-input" id="fname-1" name="fname-1" />
        </div>
      </div>
      <div class="col">
        <div class="mb-3">
          <label for="lname-1" class="form-title">Last Name</label>
          <input type="text" class="custom-input" id="lname-1" name="lname-1" />
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <div class="mb-3">
          <label for="email-1" class="form-title">Email</label>
          <input
            type="email"
            class="custom-input"
            id="email-1"
            name="email-1"
          />
        </div>
      </div>
      <div class="col">
        <div class="mb-3">
          <label for="phone-1" class="form-title">Phone No.</label>
          <input type="text" class="custom-input" id="phone-1" name="phone-1" />
        </div>
      </div>
    </div>
  </div>

  <div class="container bg-white my-4 border">
    <span class="customBadge">Team Member2</span>
    <div class="row">
      <div class="col">
        <div class="mb-3">
          <label for="fname-2" class="form-title">First Name</label>
          <input type="text" class="custom-input" id="fname-2" name="fname-2" />
        </div>
      </div>
      <div class="col">
        <div class="mb-3">
          <label for="lname-2" class="form-title">Last Name</label>
          <input type="text" class="custom-input" id="lname-2" name="lname-2" />
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <div class="mb-3">
          <label for="email-2" class="form-title">Email</label>
          <input
            type="email"
            class="custom-input"
            id="email-2"
            name="email-2"
          />
        </div>
      </div>
      <div class="col">
        <div class="mb-3">
          <label for="phone-2" class="form-title">Phone No.</label>
          <input type="text" class="custom-input" id="phone-2" name="phone-2" />
        </div>
      </div>
    </div>
  </div>

  <div class="container bg-white my-4 border">
    <span class="customBadge">Team Member3</span>
    <div class="row">
      <div class="col">
        <div class="mb-3">
          <label for="fname-3" class="form-title">First Name</label>
          <input type="text" class="custom-input" id="fname-3" name="fname-3" />
        </div>
      </div>
      <div class="col">
        <div class="mb-3">
          <label for="lname-3" class="form-title">Last Name</label>
          <input type="text" class="custom-input" id="lname-3" name="lname-3" />
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <div class="mb-3">
          <label for="email-3" class="form-title">Email</label>
          <input
            type="email"
            class="custom-input"
            id="email-3"
            name="email-3"
          />
        </div>
      </div>
      <div class="col">
        <div class="mb-3">
          <label for="phone-3" class="form-title">Phone No.</label>
          <input type="text" class="custom-input" id="phone-3" name="phone-3" />
        </div>
      </div>
    </div>
  </div>
  {% else %} 
  {% for team_member in team_members %}
  <div class="container bg-white my-4 border">
    <span class="customBadge">Team Member {{ forloop.counter }}</span>
    <div class="row">
      <div class="col">
        <div class="mb-3">
          <label for="fname-{{ forloop.counter }}" class="form-title"
            >First Name</label
          >
          <input
            type="text"
            class="custom-input"
            id="fname-{{ forloop.counter }}"
            name="fname-{{ forloop.counter }}"
            value="{{ team_member.first_name }}"
            {% if team_member.email|length != 0 %}readonly{% endif %}
          />
        </div>
      </div>
      <div class="col">
        <div class="mb-3">
          <label for="lname-{{ forloop.counter }}" class="form-title"
            >Last Name</label
          >
          <input
            type="text"
            class="custom-input"
            id="lname-{{ forloop.counter }}"
            name="lname-{{ forloop.counter }}"
            value="{{ team_member.last_name }}"
            {% if team_member.email|length != 0 %}readonly{% endif %}
          />
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <div class="mb-3">
          <label for="email-{{ forloop.counter }}" class="form-title"
            >Email</label
          >
          <input
            type="email"
            class="custom-input"
            id="email-{{ forloop.counter }}"
            name="email-{{ forloop.counter }}"
            value="{{ team_member.email }}"
            {% if team_member.email|length != 0 %}readonly{% endif %}
          />
        </div>
      </div>
      <div class="col">
        <div class="mb-3">
          <label for="phone-{{ forloop.counter }}" class="form-title"
            >Phone No.</label
          >
          <input
            type="text"
            class="custom-input"
            id="phone-{{ forloop.counter }}"
            name="phone-{{ forloop.counter }}"
            value="{{ team_member.phone_no }}"
            {% if team_member.email|length != 0 %}readonly{% endif %}
          />
        </div>
      </div>
    </div>
  </div>
  {% endfor %} {% endif %}

  <!-- submit button -->
  <div class="submit-area">
    <div class="area-right">
      <button class="customBtnSubmit" type="submit">Submit</button>
    </div>
  </div>
</form>
{% endblock body %}

{% block script %}
<script
  src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
  integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
  crossorigin="anonymous"
></script>
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"
  integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk"
  crossorigin="anonymous"
></script>
{% endblock script %}